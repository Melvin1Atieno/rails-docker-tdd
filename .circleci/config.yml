version: 2
# represents a list of jobs that will be run
jobs:
# Tells circleCi to use a machine executer
  build:
    machine:
      image: circleci/classic:201808-01
    # specifies all the commands that will be executed during this build
    steps:
    # perform a git clone into the build environment
      - checkout
      - run:
          name: add user
          command:sudo cat /etc/passwd
            # sudo addgroup --system --gid 1000 newgroup
            # sudo adduser --system --gecos '' --uid 1000
            # sudo adduser newgroup newuser
            # su newuser
      # specify commands to execute within the build
      - run:
          name : build the image 
          command: docker-compose up --build 
